(function() {
  var ReleaseNotesView, WorkspaceView, fs, path;

  fs = require('fs');

  path = require('path');

  ReleaseNotesView = require('../lib/release-notes-view');

  WorkspaceView = require('atom').WorkspaceView;

  describe("ReleaseNotesView", function() {
    var releaseNotes, releaseNotesView, _ref;
    _ref = [], releaseNotes = _ref[0], releaseNotesView = _ref[1];
    beforeEach(function() {
      spyOn(atom, 'isReleasedVersion').andReturn(true);
      atom.workspaceView = new WorkspaceView;
      return waitsForPromise(function() {
        return atom.packages.activatePackage('release-notes');
      });
    });
    return describe("when in release mode", function() {
      return it("renders the latest release's notes", function() {
        atom.workspaceView.trigger('window:update-available', ['v30.0.0', 'NOTES']);
        waitsForPromise(function() {
          return atom.workspaceView.open('atom://release-notes');
        });
        return runs(function() {
          releaseNotes = atom.workspaceView.find('.release-notes');
          releaseNotesView = releaseNotes.view();
          expect(releaseNotes.find('h1').text()).toBe('v30.0.0');
          return expect(releaseNotes.find('.description').text()).toContain("NOTES");
        });
      });
    });
  });

}).call(this);
