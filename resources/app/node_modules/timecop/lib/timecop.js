(function() {
  var TimecopView, createView, viewUri;

  TimecopView = null;

  viewUri = 'atom://timecop';

  createView = function(state) {
    if (TimecopView == null) {
      TimecopView = require('./timecop-view');
    }
    return new TimecopView(state);
  };

  atom.deserializers.add({
    name: 'TimecopView',
    deserialize: function(state) {
      return createView(state);
    }
  });

  module.exports = {
    activate: function() {
      atom.workspace.registerOpener(function(filePath) {
        if (filePath === viewUri) {
          return createView({
            uri: viewUri
          });
        }
      });
      return atom.workspaceView.command('timecop:view', function() {
        return atom.workspaceView.open(viewUri);
      });
    }
  };

}).call(this);
